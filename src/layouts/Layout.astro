---
interface Props {
  title?: string;
  description?: string;
  keywords?: string;
  canonicalUrl?: string;
  ogImage?: string;
  ogType?: string;
  noindex?: boolean;
}

const { 
  title = "PlumberSEO.co.uk - #1 SEO Agency for UK Plumbers & Heating Engineers",
  description = "Specialist SEO agency for UK plumbers and heating engineers. Get more boiler installs, emergency call-outs and high-value jobs with our proven local SEO strategies. No long contracts.",
  keywords = "plumber SEO, heating engineer SEO, local SEO for plumbers, plumbing marketing, Google Maps ranking plumbers, boiler install leads, UK plumber marketing",
  canonicalUrl,
  ogImage = "/og-image.jpg",
  ogType = "website",
  noindex = false
} = Astro.props;

const siteUrl = "https://plumberseo.co.uk";
const fullCanonicalUrl = canonicalUrl ? `${siteUrl}${canonicalUrl}` : `${siteUrl}${Astro.url.pathname}`;
const fullOgImage = ogImage.startsWith('http') ? ogImage : `${siteUrl}${ogImage}`;

// JSON-LD Structured Data for LocalBusiness
const jsonLd = {
  "@context": "https://schema.org",
  "@type": "ProfessionalService",
  "name": "PlumberSEO.co.uk",
  "description": description,
  "url": siteUrl,
  "logo": `${siteUrl}/favicon.svg`,
  "image": fullOgImage,
  "telephone": "020 8123 4567",
  "email": "hello@plumberseo.co.uk",
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "London",
    "addressCountry": "GB"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": "51.5074",
    "longitude": "-0.1278"
  },
  "areaServed": {
    "@type": "Country",
    "name": "United Kingdom"
  },
  "priceRange": "££",
  "openingHoursSpecification": {
    "@type": "OpeningHoursSpecification",
    "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
    "opens": "09:00",
    "closes": "17:30"
  },
  "sameAs": [
    "https://www.facebook.com/plumberseo",
    "https://twitter.com/plumberseo",
    "https://www.linkedin.com/company/plumberseo"
  ],
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.9",
    "reviewCount": "127"
  }
};
---

<!doctype html>
<html lang="en-GB">
	<head>
		<!-- Primary Meta Tags -->
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title>{title}</title>
		<meta name="title" content={title} />
		<meta name="description" content={description} />
		<meta name="keywords" content={keywords} />
		<meta name="author" content="PlumberSEO.co.uk" />
		<meta name="generator" content={Astro.generator} />
		{noindex && <meta name="robots" content="noindex, nofollow" />}
		
		<!-- Canonical URL -->
		<link rel="canonical" href={fullCanonicalUrl} />
		
		<!-- Favicon -->
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
		
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content={ogType} />
		<meta property="og:url" content={fullCanonicalUrl} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={fullOgImage} />
		<meta property="og:image:width" content="1200" />
		<meta property="og:image:height" content="630" />
		<meta property="og:locale" content="en_GB" />
		<meta property="og:site_name" content="PlumberSEO.co.uk" />
		
		<!-- Twitter -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:url" content={fullCanonicalUrl} />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content={fullOgImage} />
		
		<!-- Geo Tags for Local SEO -->
		<meta name="geo.region" content="GB" />
		<meta name="geo.placename" content="London" />
		
		<!-- JSON-LD Structured Data -->
		<script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />
		
		<!-- Font Awesome -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		
		<!-- Preconnect to external domains for performance -->
		<link rel="preconnect" href="https://cdnjs.cloudflare.com" />
		<link rel="preconnect" href="https://images.unsplash.com" />
		<link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" />
		<link rel="dns-prefetch" href="https://images.unsplash.com" />
	</head>
	<body class="min-h-screen bg-white text-slate-900 antialiased">
		<slot />
	</body>
</html>

<style is:global>
	@import "../styles/global.css";
</style>
